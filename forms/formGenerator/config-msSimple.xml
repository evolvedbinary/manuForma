<?xml version="1.0" encoding="UTF-8"?>
<config type="wizard">
    <appTitle>manuForma</appTitle>
    <formTitle>Edit MS TEI Records</formTitle>
    <formURL>/exist/apps/manuForma/</formURL>
    <formName>msSimple</formName>
    <formAuthor>majlis-erc</formAuthor>
    <formDesc> </formDesc>
    <!-- Language to output lables, hints etc, if empty defaults to English -->
    <formLang>en</formLang>
    <formDesc> </formDesc>
    <!-- Language to output lables, hints etc, if empty defaults to English -->
    <formLang>en</formLang>
    <!-- Saving and managing created TEI files -->
    <recordManagement>
        <saveOptions>
            <option name="github" enable="true">
                <parameter name="githubRepoName">majlis-data</parameter>
                <parameter name="githubPath">data/manuscripts/tei/</parameter>
                <parameter name="githubOwner">majlis-erc</parameter>
                <parameter name="githubBranch">main</parameter>
            </option>
            <option name="exist-db" enable="true">
                <parameter name="eXistCollection">/db/apps/majlis-data/data/manuscripts/tei</parameter>
            </option>
            <option name="download" enable="true"/>
        </saveOptions>
        <retrieveOptions>
            <option name="exist-db" enable="true">
                <parameter name="eXistCollection">/db/apps/majlis-data/data/manuscripts/tei</parameter>
            </option>
        </retrieveOptions>
    </recordManagement>
    <!-- Blank templates can be used as a starting point for editing. Multiple templates can be included here.  -->
    <blankTemplates>
        <template name="Generic MS Template" src="/forms/templates/full-mss-template.xml"/>
        <template name="MS part Template" src="/forms/templates/ms-part-example.xml"/>
    </blankTemplates>
    
    <!-- Add lookup options for elements with controlled vocabularly, must have an api already working. Example the Srophe apps person or places api -->
    <lookups>
        <lookup api="/exist/apps/majlis/api/search/persName?format=xml&amp;q=" formURL="forms/mssTEI/lookup/persName.xhtml" elementName="persName" formName="persName" lookupLabel="Look up persons"/>
        <popup formName="personTEI" elementName="persName" label="New Persons"/>
        <lookup api="/exist/apps/majlis/api/search/placeName?format=xml&amp;q=" formURL="forms/mssTEI/lookup/placeName.xhtml" elementName="placeName" formName="placeName" lookupLabel="Look up places"/>
        <popup formName="placeTEI" elementName="placeName" label="New Places"/>
        <lookup api="/exist/apps/majlis/api/search/title?format=xml&amp;q=" formURL="forms/mssTEI/lookup/title.xhtml" elementName="title" formName="title" lookupLabel="Look up title"/>
        <popup formName="worksTEI" elementName="title" label="New Work"/>
        <lookup api="/exist/apps/majlis/api/search/citation?format=xml&amp;q=" formURL="forms/mssTEI/lookup/bibl.xhtml" elementName="bibl" formName="bibl" lookupLabel="Look up bibliographic record"/>
    </lookups>
    <projectSpecificData>
        <xmlPath name="Project Picker" src="/forms/templates/editionStmtProjectOptions.xml" element="editionStmt"/>
    </projectSpecificData>
    <!--
        For better performance the TEI records are into sections. Each section will output a form. 
        This will allow better load and response time for forms, and a step-by-step method of editing records. 
        In process records can be stored in the eXist-db database or downloaded to the file system, where they can be loaded 
        into the form again as needed. 
        
        List forms in order of editing preference.
        additions
    -->
    <subforms>
        <subform xpath="/tei:TEI/descendant::tei:msDesc/tei:msIdentifier" formName="msIdentifier" formLabel="Identification" repeat="no">
            <localSchema src="../schemas/mss-msidentifier.xml"/>
            <globalSchema src="../schemas/mss-msidentifier.xml"/>
            <xmlTemplate src="../templates/full-mss-template.xml"/>
            <formDesc>Add shelfmark and information on the holding institution and alternate references to existing cataloging data.</formDesc>
            <controlledValuesElements>
                <element ident="country">
                    <valList type="closed">
                        <valItem ident="Russia"/>
                        <valItem ident="USA"/>
                        <valItem ident="Great Britain"/>
                        <valItem ident="Israel"/>
                        <valItem ident="Hungary"/>
                        <valItem ident="France"/>
                    </valList>
                </element>
                <element ident="institution">
                    <valList type="closed">
                        <valItem ident="National Library of Russia"/>
                        <valItem ident="British Library"/>
                        <valItem ident="Ben Zvi Institute"/>
                        <valItem ident="Library of the Hungarian Academy of Sciences"/>
                        <valItem ident="Cambridge University Library"/>
                        <valItem ident="National Library of France"/>
                        <valItem ident="Alliance IsraÃ©lite Universelle"/>
                        <valItem ident="Jewish Theological Seminary"/>
                    </valList>
                </element>
                <element ident="settlement">
                    <valList type="closed">
                        <valItem ident="St. Petersburg"/>
                        <valItem ident="London"/>
                        <valItem ident="Jerusalem"/>
                        <valItem ident="Budapest"/>
                        <valItem ident="Cambridge"/>
                        <valItem ident="Paris"/>
                        <valItem ident="New York"/>
                    </valList>
                </element>
                <element ident="repository">
                    <valList type="closed">
                        <valItem ident="Kaufmann"/>
                    </valList>
                </element>
            </controlledValuesElements>
            <elementGroups>
                <group groupLabel="Identification via location, institution, shelfmark" groupNo="1">
                    <element xpath="tei:country"/>
                    <element xpath="tei:settlement"/>
                    <element xpath="tei:idno"/>
                    <element xpath="tei:institution"/>
                </group>
                <group groupLabel="Identification via old shelfmark " groupNo="2">
                    <element xpath="tei:altIdentifier"/>
                    <element xpath="tei:msName"/>
                </group>
                <!--
                <group groupLabel="Identification via catalogues and respositories" groupNo="2">
                    <element xpath="tei:repository"/>
                </group>
                -->
            </elementGroups>
        </subform>
    </subforms>
</config>